!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HubspotAjaxForms=e():t.HubspotAjaxForms=e()}(window,function(){return function(r){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,r){"use strict";r.r(e);var o="https://api.hsforms.com/submissions/v3/integration/submit",i="https://api.ipify.org?format=json";function s(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"getUserIp",value:function(t){var e=new XMLHttpRequest;e.open("GET",i),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&t(JSON.parse(e.responseText).ip)},e.send(null)}},{key:"createPropertyPairs",value:function(t){return s(document.querySelectorAll(t)).map(function(t){var e={name:t.name,value:t.value};switch(t.type){case"date":return e.value=new Date(t.value).getTime()/1e3,e;case"checkbox":return e.value=!!t.checked,e;default:return e}})}}],(r=null)&&u(e.prototype,r),n&&u(e,n),t}();function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.d(e,"HubspotAjaxForm",function(){return n});var l=Symbol("_validateRequiredOptions"),f=Symbol("_enhanceForm"),p=Symbol("_createPayload"),n=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._form=t,this._options=e,this._endpoint="".concat(o,"/").concat(this._options.portalId,"/").concat(this._options.formId),this._event=null,this._ipAddress=null,this._submitTrigger=null,this[l](),this[f]()}var t,e,n;return t=r,(e=[{key:l,value:function(){return this._options.portalId?this._options.formId?!!this._options.fieldSelector||console.error("[Hubspot AJAX Forms] - A fieldSelector is required."):console.error("[Hubspot AJAX Forms] - A formId is required."):console.error("[Hubspot AJAX Forms] - A portalId is required.")}},{key:f,value:function(){var e=this;"string"==typeof this._form&&(this._form=document.querySelector(this._form)),this._submitTrigger=this._form.querySelector('button[type="submit"]'),this._form.addEventListener("submit",function(t){t.preventDefault(),e._event=t,e._options.withIpAddress?a.getUserIp(function(t){e._ipAddress=t,e.submit()}):e.submit()})}},{key:p,value:function(){var t={fields:a.createPropertyPairs(this._options.fieldSelector),submittedAt:Date.now(),context:this._options.context};return this._options.withIpAddress&&(t.context.ipAddress=this._ipAddress),JSON.stringify(t)}},{key:"submit",value:function(){var t=this;"function"==typeof this._options.onSubmit&&this._options.onSubmit(this._event,this[p]()),this._form.classList.add("hs-ajax-form--working"),this._submitTrigger.setAttribute("disabled","disabled");var e=new XMLHttpRequest;return e.open("POST",this._endpoint),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&(t._options.onComplete({response:JSON.parse(e.response),status:e.status}),t._form.classList.remove("hs-ajax-form--working"),t._form.classList.add("hs-ajax-form--submitted"),t._submitTrigger.removeAttribute("disabled"))},e.send(this[p]()),!0}}])&&c(t.prototype,e),n&&c(t,n),r}()}])});